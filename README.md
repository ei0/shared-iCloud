# shared-iCloud
共享云盘的简单实现
## 客户端
1. 读取文件备份信息记录每个文件的etag信息（用修改时间和大小简单标记）
2. 文件检测模块，对指定目录下的所有文件逐个获取etag信息，判断etag是否一致，不一致的需要重新备份
3. 获取到需要备份的文件列表诸葛进行文件备份--向服务器发送文件上传请求
4. 文件上传备份后，更新数据管理模块中的文件备份信息  
### 模块实现
1. 数据管理模块：基于STL容器unordered_map实现的简单数据管理
2. 上传与监控模块：基于httplib与对文件etag的信息判断，来实时对为备份文件或已修改文件上传
## 服务端
1. 搭建http服务器，等待客户端连接上来，针对客户端的请求进行处理  
&emsp;a.文件上传请求，对文件实现数据备份，并记录  
&emsp;b.文件列表请求，将已备份的文件，组织成一个html网页相应给浏览器  
&emsp;c.文件下载请求，若请求文件已被压缩，先解压再响应文件数据，若未被压缩，直接响应文件数据  
2. 初始化加载备份目录
3. 启动非热点文件压缩模块  
&emsp;a.每隔一段时间对文件进行检测，比较文件的最后一次访问时间与基准时间，来判断该文件是否为热点/非热点文件  
&emsp;b.若为非热点文件则对该文件进行压缩，并更新数据模块中的数据  
### 模块实现
1. 文件压缩模块：基于zlib封装实现非热点文件的压缩与解压缩
2. 数据管理模块：基于STL容器-unordered_map实现数据管理
3. 网络通信模块：基于httplib封装搭建web服务器
## 升级问题
1.多路转接IO,Select模型的使用
2.RAS加密算法的并入
